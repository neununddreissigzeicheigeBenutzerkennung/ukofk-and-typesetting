 % Custom Code Typesetting Package (Version 1.0)
%
% Overview:
% This package provides a convenient environment (\code) for typesetting code snippets in TeX documents. 
% The \code environment ensures that TeX obeys line breaks and tabs, and uses a typewriter font for code readability.
% Additionally, it offers a \comment command to add "//" comment indicators and move subsequent text to the right of the line. 
% This command should be used only at the end of a line of code.

% Define a dimension for tab spacing
\newdimen\codetab
\codetab=\parindent

% Redefine ^^M (carriage return) to start a new paragraph
\catcode`\^^M=13
\def^^M{\par}

% Redefine ^^I (tab) to insert tab spacing
\catcode`\^^I=13
\def^^I{\hskip\codetab}

% Define \code environment
\def\code{%
  \parindent=0pt % Set paragraph indentation to zero
  \everypar={\tt} % Set every paragraph to use typewriter font
  \def\{{\char`\{} % Redefine { character
  \def\}{\char`\}} % Redefine } character
  \def\#{{\char`\#}} % Redefine # character
  \def\%{{\char`\%}} % Redefine % character
  \def\_{{\char`\_}} % Redefine _ character
  \def\&{{\char`\&}} % Redefine & character
  \def\${{\char`\$}} % Redefine $ character
  \def\~{{\char`\~}} % Redefine ~ character
  \def\^{{\char`\^}} % Redefine ^ character
  \def\comment{\rm\dotfill//} % Define \comment command
  \catcode`\^^M=13 % Redefine carriage return to start a new paragraph
  \catcode`\^^I=13 % Redefine tab to insert tab spacing
}

% Note: The \code environment may not function properly if ^^M or ^^I are redefined elsewhere in the document.

